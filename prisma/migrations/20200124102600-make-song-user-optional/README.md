# Migration `20200124102600-make-song-user-optional`

This migration has been generated by Matt Condon (shrugs) at 1/24/2020, 10:26:00 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "songadayworld"."Song" DROP COLUMN "instrument",
ADD COLUMN "instrument" text  NOT NULL DEFAULT 'AcousticGuitar',
DROP COLUMN "location",
ADD COLUMN "location" text  NOT NULL DEFAULT 'Baltimore',
DROP COLUMN "mood",
ADD COLUMN "mood" text  NOT NULL DEFAULT 'Angry',
DROP COLUMN "owner",
ADD COLUMN "owner" text   ,
DROP COLUMN "topic",
ADD COLUMN "topic" text  NOT NULL DEFAULT 'Airport';

ALTER TABLE "songadayworld"."Song" ADD FOREIGN KEY ("owner") REFERENCES "songadayworld"."User"("id") ON DELETE SET NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200124102309-make-songs-collectible-and-ownable..20200124102600-make-song-user-optional
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
 }
 generator photon {
   provider = "prisma-client-js"
@@ -118,9 +118,9 @@
   youtubeId   String     @unique
   title       String
   description String
   collectors  User[]     @relation(name: "collectors")
-  owner       User       @relation(name: "owner")
+  owner       User?      @relation(name: "owner")
   location    Location
   topic       Topic
   mood        Mood
   beard       Beard
```


