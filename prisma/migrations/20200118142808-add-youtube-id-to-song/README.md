# Migration `20200118142808-add-youtube-id-to-song`

This migration has been generated by Matt Condon (shrugs) at 1/18/2020, 2:28:08 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "songadayworld"."Song" ADD COLUMN "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
ADD COLUMN "releasedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
ADD COLUMN "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
ADD COLUMN "youtubeId" text  NOT NULL DEFAULT '',
DROP COLUMN "mood",
ADD COLUMN "mood" text  NOT NULL DEFAULT 'Pensive',
DROP COLUMN "topic",
ADD COLUMN "topic" text  NOT NULL DEFAULT 'Poetic';

CREATE UNIQUE INDEX "Song.youtubeId" ON "songadayworld"."Song"("youtubeId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200115182949..20200118142808-add-youtube-id-to-song
--- datamodel.dml
+++ datamodel.dml
@@ -1,23 +1,71 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
 }
 generator photon {
   provider = "prisma-client-js"
 }
+// via https://docs.google.com/spreadsheets/d/18jj0J-IiKvwdnhligRVQR_7dpxLKIIvDh9B4bCwtEM0/edit#gid=0
 enum Location {
   Vermont
+  LosAngeles
+  Oakland
 }
 enum Topic {
+  Poetic
+  Anxiety
+  Airport
+  Life
+  VideoGames
+  Commission
+  Internet
+  SongADay
+  Science
+  SocialJustice
+  Sex
+  Politics
+  Apple
+  Friend
+  Sick
+  Love
+  Animals
+  Nerd
+  Book
+  PSA
+  Object
   Kids
+  Instrumental
+  Birthday
+  Ringtone
+  Contest
+  TV
+  ThemeSong
+  Motivational
+  Family
+  WanderingFall
+  Traditional
+  Improv
 }
 enum Mood {
+  Pensive
+  Sad
+  Anxious
+  Chill
+  Happy
+  Silly
+  Drunk
+  Intense
+  Tired
+  Excited
   Angry
+  Confused
+  Bored
+  Disgusted
 }
 enum Beard {
   Beard
@@ -30,14 +78,18 @@
 model Song {
   id         String     @default(cuid()) @id
   number     Int        @unique
+  youtubeId  String     @unique
   owner      User?
   location   Location
   topic      Topic
   mood       Mood
   beard      Beard
   instrument Instrument
+  releasedAt DateTime   @default(now())
+  createdAt  DateTime   @default(now())
+  updatedAt  DateTime   @updatedAt
 }
 model MagicCode {
   code      String   @id
```


