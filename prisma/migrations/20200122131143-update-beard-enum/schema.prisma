datasource db {
  provider = "postgresql"
  url = "***"
}

generator photon {
  provider = "prisma-client-js"
}

// via https://docs.google.com/spreadsheets/d/18jj0J-IiKvwdnhligRVQR_7dpxLKIIvDh9B4bCwtEM0/edit#gid=0
enum Location {
  Vermont
  LosAngeles
  Oakland
}

enum Topic {
  Poetic
  Anxiety
  Airport
  Life
  VideoGames
  Commission
  Internet
  SongADay
  Science
  SocialJustice
  Sex
  Politics
  Apple
  Friend
  Sick
  Love
  Animals
  Nerd
  Book
  PSA
  Object
  Kids
  Instrumental
  Birthday
  Ringtone
  Contest
  TV
  ThemeSong
  Motivational
  Family
  WanderingFall
  Traditional
  Improv
}

enum Mood {
  Pensive
  Sad
  Anxious
  Chill
  Happy
  Silly
  Drunk
  Intense
  Tired
  Excited
  Angry
  Confused
  Bored
  Disgusted
}

enum Beard {
  Clean
  Shadow
  Stubble
}

enum Instrument {
  Organ
}

model Song {
  id          String     @default(cuid()) @id
  number      Int        @unique
  youtubeId   String     @unique
  title       String
  description String
  owner       User?
  location    Location
  topic       Topic
  mood        Mood
  beard       Beard
  instrument  Instrument
  comments    Comment[]
  releasedAt  DateTime   @default(now())
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}

model MagicCode {
  code      String   @id
  user      User
  createdAt DateTime @default(now())
}

model User {
  id          String     @default(cuid()) @id
  email       String     @unique
  displayName String?
  magicCode   MagicCode?
  song        Song?
}

model Comment {
  id        String   @default(cuid()) @id
  song      Song
  replies   Reply[]
  author    User
  text      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Reply {
  id        String   @default(cuid()) @id
  comment   Comment
  author    User
  text      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
